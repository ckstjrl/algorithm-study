'''
[문제]
두 자연수 N과 P를 가지고  다음 과정을 거쳐서 나오는 수를 차례대로 출력해보자. 
처음 출력하는 수는 N이고, 두 번째 이후 출력하는 수는 N을 곱하고 P로 나눈 나머지를 구하는 과정을 반복하여 구한다. 
즉, 먼저 N에 N을 곱하고, 이 수를 P로 나눈 나머지를 두 번째에 출력한다. 
다음에는 이 나머지에 N을 곱하고 P로 나눈 나머지를 출력한다. 
다음에는 이 나머지에 N을 곱한 후 P로 나눈 나머지를 출력한다. 
이 과정을 계속 반복해보면 출력되는 L에는 반복되는 부분이 있다. 

예를 들어서, N = 67, P = 31인 경우를 생각해보자. 처음 출력되는 수는 67이고, 
두 번째로 출력되는 수는 67×67 = 4489를 31로 나눈 나머지 25이다. 
다음에는 25×67 = 1675를 31로 나눈 나머지 1, 
다음에는 1×67 = 67을 31로 나눈 나머지 5가 차례대로 출력된다. 
다음에는 5×67 = 335를 31로 나눈 나머지 25가 출력되는데, 
이 수는 이미 이전에 출력된 수이다. 이 과정을 그림으로 보이면 다음과 같다.

[입력]
첫째 줄에 처음 시작하는 두 자연수 N과 P가 공백을 사이에 두고 주어진다.

[출력]
첫째 줄에 반복되는 부분에 포함된 서로 다른 수의 개수를 출력한다.
'''

# BOJ 2526 - 싸이클

N, P = map(int, input().split())

seen = {}           # 값 -> 처음 등장한 인덱스
idx = 0             
x = N              

while True:
    if x in seen:
        # 사이클 길이 = 지금 인덱스 - 처음 등장 인덱스
        print(idx - seen[x])
        break
    seen[x] = idx
    x = (x * N) % P
    idx += 1
